# Процедура модифікації Rancher

## 1. Підготовка середовища розробки

1.1. Клонуйте репозиторій Rancher:
```
git clone https://github.com/rancher/rancher.git
cd rancher
```

1.2. Встановіть необхідні залежності (Go, Docker, Kubernetes CLI).

## 2. Модифікація коду Rancher

2.1. Визначте конкретні модулі для модифікації (наприклад, worker, що реагує на видалення кластера).

2.2. Внесіть необхідні зміни в код. Приклад:
```go
// Приклад: Вимкнення реакції на видалення кластера
func (c *Controller) handleClusterRemoval(cluster *v3.Cluster) error {
    // Закоментуйте або видаліть код, що виконує видалення
    // return c.deleteCluster(cluster)
    return nil
}
```

2.3. Додайте конфігураційний прапорець для ввімкнення/вимкнення модифікацій.

## 3. Збірка модифікованої версії

3.1. Зберіть бінарний файл:
```
go build -o rancher
```

3.2. Створіть Docker-образ:
```
docker build -t custom-rancher:v1 .
```

## 4. Тестування

4.1. Розгорніть модифіковану версію Rancher в тестовому середовищі.

4.2. Проведіть тестування згідно з визначеними сценаріями використання.

## 5. Документація

5.1. Задокументуйте всі внесені зміни.

5.2. Опишіть процес розгортання та конфігурації модифікованої версії.

5.3. Створіть інструкції з використання для кожного сценарію.

## 6. Процедура використання

6.1. Для тимчасових обхідних шляхів:
   - Розгорніть модифіковану версію.
   - Застосуйте необхідні конфігурації.
   - Після вирішення проблеми поверніться до стандартної версії.

6.2. Для міграції кластерів:
   - Вимкніть реакцію на видалення кластера.
   - Виконайте процес міграції.
   - Увімкніть стандартну функціональність.

6.3. Для перевірки помилок у висхідному потоці:
   - Використовуйте модифіковану версію для ізоляції проблеми.
   - Зберіть логи та діагностичну інформацію.

## 7. Безпека та відновлення

7.1. Створіть план відкату до стандартної версії Rancher.

7.2. Регулярно синхронізуйте модифіковану версію з офіційними оновленнями.

## 8. Моніторинг та підтримка

8.1. Встановіть додатковий моніторинг для модифікованої версії.

8.2. Визначте процедури підтримки та оновлення модифікованої версії.
